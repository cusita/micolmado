<div class="page">
  <header class="page__header">
    <button type="button" class="back-btn" routerLink="/">‚Üê</button>
    <h2>Proveedores</h2>
  </header>

  <section class="section">
    <h3>Registrar proveedor</h3>

    <form [formGroup]="form" (ngSubmit)="save()" class="form">
      <div class="form__row">
        <label class="field">
          <span>Nombre</span>
          <input type="text" formControlName="name" />
          <small *ngIf="nameInvalid"> Escribe el nombre del proveedor. </small>
        </label>

        <label class="field">
          <span>Contacto</span>
          <input
            type="text"
            formControlName="contact"
            placeholder="Tel√©fono, WhatsApp, correo..."
          />
          <small *ngIf="contactInvalid"> Escribe un contacto v√°lido. </small>
        </label>
      </div>

      <label class="field">
        <span>Descripci√≥n (qu√© provee)</span>
        <input
          type="text"
          formControlName="description"
          placeholder="Huevos, arroz, refrescos, etc."
        />
        <small *ngIf="descriptionInvalid"> Describe qu√© te provee este proveedor. </small>
      </label>

      <label class="field">
        <span>Nota (opcional)</span>
        <textarea
          formControlName="note"
          rows="2"
          placeholder="Ej: trae los lunes, paga solo en efectivo, etc."
        ></textarea>
      </label>

      <div class="actions">
        <button
          *ngIf="editingSupplier"
          type="button"
          class="btn btn--secondary"
          (click)="cancelEdit()"
        >
          Cancelar
        </button>

        <button type="submit" class="btn btn--primary">
          {{ editingSupplier ? 'Guardar cambios' : 'Guardar' }}
        </button>
      </div>
    </form>
  </section>

  <section class="section">
    <h3>Lista de proveedores</h3>

    <app-search-filter
      label="Buscar proveedor"
      placeholder="Por nombre, contacto, descripci√≥n o nota"
      (search)="onSearchSuppliers($event)"
    ></app-search-filter>

    <p *ngIf="suppliers.length === 0" class="empty">
      No hay proveedores que coincidan con la b√∫squeda.
    </p>

    <ul *ngIf="suppliers.length > 0" class="list">
      <li *ngFor="let s of suppliers" class="item" [class.item--inactive]="!s.isActive">
        <div class="item__header">
          <div>
            <span class="item__name">{{ s.name }}</span>
            <span class="item__badge" *ngIf="!s.isActive">Inactivo</span>
          </div>

          <div class="item__actions">
            <button type="button" class="btn-icon" (click)="startEdit(s)" title="Editar proveedor">
              ‚úèÔ∏è
            </button>

            <button
              type="button"
              class="btn-icon btn-icon--danger"
              (click)="deleteSupplier(s)"
              title="Eliminar proveedor"
            >
              üóëÔ∏è
            </button>
          </div>
        </div>

        <div class="item__line">
          <span class="label">Contacto:</span>
          <span class="value">{{ s.contact }}</span>
        </div>

        <div class="item__line">
          <span class="label">Qu√© provee:</span>
          <span class="value">{{ s.description }}</span>
        </div>

        <p class="item__note" *ngIf="s.note">
          {{ s.note }}
        </p>
      </li>
    </ul>
  </section>
</div>
